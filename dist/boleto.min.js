/*!
 * boleto.js v1.0.0
 * https://github.com/guilhermearaujo/boleto.js
 *
 * Licensed MIT © Guilherme Araújo
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Boleto=t()}}(function(){var t,e,r;return function t(e,r,n){function o(a,u){if(!r[a]){if(!e[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var f=r[a]={exports:{}};e[a][0].call(f.exports,function(t){var r=e[a][1][t];return o(r?r:t)},f,f.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,r,n){!function(e,n){"function"==typeof t&&t.amd?t([],n):"object"==typeof r&&r.exports?r.exports=n():e.xmlserializer=n()}(this,function(){var t=function(t){return t.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")},e=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},r=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},n=function(t){var r=t.value;return" "+t.name+'="'+e(r)+'"'},o=function(t){var e=t.tagName;return"http://www.w3.org/1999/xhtml"===t.namespaceURI&&(e=e.toLowerCase()),e},i=function(t,e){var r=Array.prototype.map.call(t.attributes||t.attrs,function(t){return t.name}).indexOf("xmlns")>=0;return r||!e&&t.namespaceURI===t.parentNode.namespaceURI?"":' xmlns="'+t.namespaceURI+'"'},a=function(t){return Array.prototype.map.call(t.childNodes,function(t){return p(t)}).join("")},u=function(t,e){var r="<"+o(t);return r+=i(t,e),Array.prototype.forEach.call(t.attributes||t.attrs,function(t){r+=n(t)}),t.childNodes.length>0?(r+=">",r+=a(t),r+="</"+o(t)+">"):r+="/>",r},c=function(t){var e=t.nodeValue||t.value||"";return r(e)},s=function(t){return"<!--"+t.data.replace(/-/g,"&#45;")+"-->"},f=function(t){return"<![CDATA["+t.nodeValue+"]]>"},p=function(t,e){var r=e&&e.rootNode;return"#document"===t.nodeName||"#document-fragment"===t.nodeName?a(t):t.tagName?u(t,r):"#text"===t.nodeName?c(t):"#comment"===t.nodeName?s(t):"#cdata-section"===t.nodeName?f(t):void 0};return{serializeToString:function(e){return t(p(e,{rootNode:!0}))}}})},{}],2:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){"string"==typeof t&&(t=t.split("")),t.reverse();for(var e=0,r=0;r<t.length;r++)e+=(r%8+2)*t[r];return(11-e%11)%10||1}var a=t("./svg"),u=n(a),c=t("./itf"),s=function(){function t(e){if(o(this,t),this.bankSlipNumber=e.replace(/[^\d]/g,""),!this.valid())throw new Error("Invalid bank slip number")}return t.prototype.valid=function t(){if(47!==this.bankSlipNumber.length)return!1;var e=this.barcode().split(""),r=e.splice(4,1);return i(e).toString()===r.toString()},t.prototype.barcode=function t(){return this.bankSlipNumber.replace(/^(\d{4})(\d{5})\d{1}(\d{10})\d{1}(\d{10})\d{1}(\d{15})$/,"$1$5$2$3$4")},t.prototype.number=function t(){return this.bankSlipNumber},t.prototype.prettyNumber=function t(){return this.bankSlipNumber.replace(/^(\d{5})(\d{5})(\d{5})(\d{6})(\d{5})(\d{6})(\d{1})(\d{14})$/,"$1.$2 $3.$4 $5.$6 $7 $8")},t.prototype.bank=function t(){switch(this.barcode().substr(0,3)){case"001":return"Banco do Brasil";case"033":return"Santander";case"104":return"Caixa Econômica Federal";case"237":return"Bradesco";case"341":return"Itaú";case"356":return"Banco Real";case"389":return"Banco Mercantil do Brasil";case"399":return"HSBC";case"422":return"Banco Safra";case"453":return"Banco Rural";case"633":return"Banco Rendimento";case"652":return"Unibanco";case"745":return"Citibank";default:return"Unknown"}},t.prototype.currency=function t(){switch(this.barcode()[3]){case"9":return{code:"BRL",symbol:"R$",decimal:","};default:return"Unknown"}},t.prototype.checksum=function t(){return this.barcode()[4]},t.prototype.expirationDate=function t(){var e=new Date("1997-10-07"),r=this.barcode().substr(5,4);return new Date(e.getTime()+864e5*r)},t.prototype.amount=function t(){return(this.barcode().substr(9,10)/100).toFixed(2)},t.prototype.prettyAmount=function t(){var e=this.currency();return"Unknown"===e?this.amount():e.symbol+" "+this.amount().replace(".",e.decimal)},t.prototype.toSVG=function t(e){var r=c.encode(this.barcode());return new u.default(r).render(e)},t}();e.exports=s},{"./itf":3,"./svg":4}],3:[function(t,e,r){"use strict";function n(t){return a+t.match(/(..?)/g).map(o).join("")+u}function o(t){for(var e=i[Math.floor(t/10)],r=i[t%10],n="",o=0;o<5;o++)n+=e[o],n+=r[o];return n}var i=["11221","21112","12112","22111","11212","21211","12211","11122","21121","12121"],a="1111",u="211";e.exports={encode:n}},{}],4:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=t("xmlserializer"),i=function(){function t(e,r){n(this,t),this.stripes=e.split("").map(function(t){return parseInt(t,10)}),this.stripeWidth=r||4}return t.prototype.render=function t(e){for(var r=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=0,i=0;i<this.stripes.length;i++,n+=a){var a=this.stripeWidth*this.stripes[i],u=document.createElementNS("http://www.w3.org/2000/svg","rect");u.setAttribute("width",a),u.setAttribute("height",100),u.setAttribute("fill",this.color(i)),u.setAttribute("x",n),u.setAttribute("y",0),r.appendChild(u)}return r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("viewBox","0 0 "+this.viewBoxWidth()+" 100"),void 0===e?o.serializeToString(r):void document.querySelector(e).appendChild(r)},t.prototype.viewBoxWidth=function t(){return this.stripes.reduce(function(t,e){return t+e},0)*this.stripeWidth},t.prototype.color=function t(e){return e%2?"#ffffff":"#000000"},t}();e.exports=i},{xmlserializer:1}]},{},[2])(2)});
